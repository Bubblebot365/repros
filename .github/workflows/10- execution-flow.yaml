name: 10 - Controlling the Execution Flow

on: 
    workflow_dispatch:
        inputs: pass-unit-tests
            type: boolean
            default: false

jobs:
    lint-build:
        runs-on: ubuntu-latest
        steps: 
            - name: Lint and build
              echo "Linting and builidn project"
    Unit-tests:
        runs-on: ubuntu-latest
        steps:
            - name: Running unit test
              echo: "running test..."
            - name: Failing tests
              if : ${{ pass-unit-tests ==false  }}
    deply-nonprod:
        runs-on: ubuntu-latest
        steps:
            if: ${{ lint-build && unit-tests == success}}
            - name: Deploying to nonprod
              echo: "Deploying to nonprod..."
    e2e-tests:
        runs-on: ubuntu-latest
        steps: 
            if: ${{ deploy-nonprod == success}}
          - name: Running E2E tests
            echo: "Running E2E tests..."
    load-tests:
        runs-on: ubuntu-latest
        if: ${{ deploy-nonprod == success}}
        steps: 
        - name: Running Load tests
          echo: "running load tests..."
    deploy-prod:
        runs-on: ubuntu-latest
        if: ${{e2e-tests && load-tests ==success}}
        steps:
            - name: Deploying to prod
              echo: "Deploying to prod..."